# Misc Module

## Overview

The misc module gives the ability to apply `Vignette` to a player, create `Rainbow` sheep and `flip` entities.

- Adds the ability to display a custom vignette for players
- Adds the ability to render rainbow sheep, client side instead of server-sided.
- Adds the ability to flip entities, without doing anything server-sided.

## Integration

### Display vignette to a player

```java
public void displayVignetteExample(Player viewer) {
    Optional<ApolloPlayer> apolloPlayerOpt = Apollo.getPlayerManager().getPlayer(viewer.getUniqueId());

    apolloPlayerOpt.ifPresent(apolloPlayer -> {
        this.miscModule.displayVignette(apolloPlayer, Vignette.builder()
            .resourceLocation("blocks/pumpkin.png")
            .opacity(0.75f)
            .build()
        );
    });
}
```

#### `Vignette` Options

`.resourceLocation(String)` is the resource location of the vignette.

```java
.resourceLocation("blocks/pumpkin.png")
```

`.opacity(ApolloLocation)` is the opacity of the shown vignette.

```java
.opacity(0.75f)
```

#### Resetting the vignette for a player

```java
public void resetVignetteExample(Player viewer) {
    Optional<ApolloPlayer> apolloPlayerOpt = Apollo.getPlayerManager().getPlayer(viewer.getUniqueId());
    apolloPlayerOpt.ifPresent(this.miscModule::resetVignette);
}
```

### Override rainbow sheep for a player

```java
public void overrideRainbowSheepExample(Player viewer) {
    Optional<ApolloPlayer> apolloPlayerOpt = Apollo.getPlayerManager().getPlayer(viewer.getUniqueId());

    apolloPlayerOpt.ifPresent(apolloPlayer -> {
        // Get all Sheep in players world
        List<UUID> sheepUuids = viewer.getWorld().getEntitiesByClass(Sheep.class)
            .stream().map(Sheep::getUniqueId).collect(Collectors.toList());

        this.miscModule.overrideRainbowSheep(apolloPlayer, sheepUuids);
    });
}
```

#### `overrideRainbowSheep` Parameters

1. `ApolloPlayer Viewer`
   - The player you want to view the rainbow sheep.
2. `List<ApolloEntity> sheepEntities`
   - A list of all sheep entities you want to be rainbow.

#### Resetting rainbow sheep for a player

```java
public void resetRainbowSheepExample(Player viewer) {
    Optional<ApolloPlayer> apolloPlayerOpt = Apollo.getPlayerManager().getPlayer(viewer.getUniqueId());

    apolloPlayerOpt.ifPresent(apolloPlayer -> {
        // Get all Sheep in players world
        List<ApolloEntity> sheepEntities = viewer.getWorld().getEntitiesByClass(Sheep.class)
            .stream().map(sheep -> new ApolloEntity(sheep.getEntityId(), sheep.getUniqueId()))
            .collect(Collectors.toList());

        this.miscModule.overrideRainbowSheep(apolloPlayer, sheepEntities);
    });
}
```

#### `resetRainbowSheep` Parameters

1. `ApolloPlayer Viewer`
   - The player you want to reset the rainbow sheep for.
2. `List<ApolloEntity> sheepEntities`
   - A list of all sheep entities you want to remove the rainbow state from.

### Flip entities for a player

```java
public void flipEntityExample(Player viewer) {
    Optional<ApolloPlayer> apolloPlayerOpt = Apollo.getPlayerManager().getPlayer(viewer.getUniqueId());

    apolloPlayerOpt.ifPresent(apolloPlayer -> {
        // Get all cows within 10 blocks of the player
        List<ApolloEntity> entities = viewer.getWorld()
            .getNearbyEntitiesByType(Cow.class, viewer.getLocation(), 10)
            .stream().map(cow -> new ApolloEntity(cow.getEntityId(), cow.getUniqueId()))
            .collect(Collectors.toList());

        this.miscModule.flipEntity(apolloPlayer, entities);
    });
}
```

#### `flipEntity` Parameters

1. `ApolloPlayer Viewer`
   - The player you want to see the flipped entity.
2. `List<ApolloEntity> entities`
   - A list of all entities you want to flip.

#### Resetting flipped entities for a player

```java
public void resetFlippedEntityExample(Player viewer) {
    Optional<ApolloPlayer> apolloPlayerOpt = Apollo.getPlayerManager().getPlayer(viewer.getUniqueId());

    apolloPlayerOpt.ifPresent(apolloPlayer -> {
        // Get all cows within 10 blocks of the player
        List<ApolloEntity> entities = viewer.getWorld()
            .getNearbyEntitiesByType(Cow.class, viewer.getLocation(), 10)
            .stream().map(cow -> new ApolloEntity(cow.getEntityId(), cow.getUniqueId()))
            .collect(Collectors.toList());

        this.miscModule.resetFlippedEntity(apolloPlayer, entities);
    });
}
```

#### `resetFlippedEntity` Parameters

1. `ApolloPlayer Viewer`
   - The player you want to reset the flipped entity for.
2. `List<ApolloEntity> entities`
   - A list of all entities you want to reset the flip state from.
